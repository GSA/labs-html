(function(b){b.fn.extend({smartpaginator:function(w){var a=b.extend({totalrecords:0,recordsperpage:0,length:10,next:"Next",prev:"Prev",first:"First",last:"Last",go:"Go",theme:"themecolor",display:"double",initval:1,datacontainer:"",dataelement:"div",onchange:null,controlsalways:!1,vertical_th:!1},w);return this.each(function(){function r(d){n.find("span").remove();var c=(d+1)*a.recordsperpage;c>a.totalrecords&&(c=a.totalrecords);n.append(b("<span/>").append(b("<b/>").text(d*a.recordsperpage+1))).append(b("<span/>").text("-")).append(b("<span/>").append(b("<b/>").text(c))).append(b("<span/>").text("of")).append(b("<span/>").append(b("<b/>").text(a.totalrecords)))} function s(d){f.find("li").remove();if(!(a.totalrecords<=a.recordsperpage)){for(var c=d;c<d+a.length&&c!=g;c++)f.append(b("<li/>").append(b("<a>").attr("id",c+1).addClass(a.theme).addClass("normal").attr("href","javascript:void(0)").text(c+1)).click(function(){e=d+b(this).closest("li").prevAll().length;h(e)}));r(d);i.val(d+1);f.find("li a").addClass(a.theme).removeClass("active");f.find("li:eq(0) a").addClass(a.theme).addClass("active");c=(f.find("li:eq(0) a").outerWidth()+2*parseInt(f.find("li:eq(0)").css("margin-left")))* f.find("li").length;f.css({width:c});t(d)}}function h(d){var c=a.length/2;0<a.length%2&&(c=(a.length+1)/2);var h=0;if(0<=d&&d<g){d>=c&&(g-d>c?h=d-(c-1):g>a.length&&(h=g-a.length));s(h);r(e);f.find("li a").removeClass("active");i.val(e+1);f.find('li a[id="'+(d+1)+'"]').addClass("active");c=e*a.recordsperpage;d=c+a.recordsperpage;d>a.totalrecords&&(d=a.totalrecords%d);if(u&&null!=a.onchange)a.onchange(e+1,c,d);if(null!=q&&0<q.length){p.css("display","none");0<b(p[0]).find("th").length&&!1==a.vertical_th&& (b(p[0]).css("display",""),c++,d++);for(;c<d;c++)b(p[c]).css("display","")}t()}}function t(){g>a.length?(0<e?a.controlsalways?j.css("display","").removeClass("disabled"):j.css("display",""):a.controlsalways?j.css("display","").addClass("disabled"):j.css("display","none"),e>a.length/2-1?a.controlsalways?k.css("display","").removeClass("disabled"):k.css("display",""):a.controlsalways?k.css("display","").addClass("disabled"):k.css("display","none"),e==g-1?a.controlsalways?l.css("display","").addClass("disabled"): l.css("display","none"):a.controlsalways?l.css("display","").removeClass("disabled"):l.css("display",""),g>a.length&&e<g-a.length/2-1?a.controlsalways?m.css("display","").removeClass("disabled"):m.css("display",""):a.controlsalways?m.css("display","").addClass("disabled"):m.css("display","none")):a.controlsalways?(k.css("display","").addClass("disabled"),j.css("display","").addClass("disabled"),l.css("display","").addClass("disabled"),m.css("display","").addClass("disabled")):(k.css("display","none"), j.css("display","none"),l.css("display","none"),m.css("display","none"))}var e=0,g=parseInt(a.totalrecords/a.recordsperpage);0<a.totalrecords%a.recordsperpage&&g++;var u=!1,n=b(this).addClass("pager").addClass(a.theme);n.find("ul").remove();n.find("div").remove();n.find("span").remove();var q,p;""!=a.datacontainer&&(q=b("#"+a.datacontainer),p=b(""+a.dataelement+"",q));var f=b("<ul/>"),j=b("<div/>").text(a.prev).click(function(){if(b(this).hasClass("disabled"))return!1;e=parseInt(f.find("li a.active").text())- 1;h(--e)}).addClass("btn"),l=b("<div/>").text(a.next).click(function(){if(b(this).hasClass("disabled"))return!1;e=parseInt(f.find("li a.active").text());h(e)}).addClass("btn"),k=b("<div/>").text(a.first).click(function(){if(b(this).hasClass("disabled"))return!1;e=0;h(0)}).addClass("btn"),m=b("<div/>").text(a.last).click(function(){if(b(this).hasClass("disabled"))return!1;e=g-1;h(e)}).addClass("btn"),i=b("<input/>").attr("type","text").keydown(function(a){var c;c=i;var b=c.get(0).selectionStart,e= c.get(0).selectionEnd,f=document.selection;c=f&&0!=f.createRange().text.length?!0:!f&&0!=c.val().substring(b,e).length?!0:!1;c&&i.val("");48<=a.which&&58>a.which?(c=parseInt(i.val()+(a.which-48)),0<c&&c<=g||a.preventDefault()):8==a.which||46==a.which||a.preventDefault()}),v=b("<input/>").attr("type","button").attr("value",a.go).addClass("btn").click(function(){if(""==i.val())return!1;e=parseInt(i.val())-1;h(e)});n.append(k).append(j).append(f).append(l).append(m).append(b("<div/>").addClass("short").append(i).append(v)); "single"==a.display&&(v.css("display","none"),i.css("display","none"));s(0);0==a.initval&&(a.initval=1);e=a.initval-1;h(e);u=!0})}})})(jQuery);